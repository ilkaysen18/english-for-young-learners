<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>English Lessons CMS with Template</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; max-width: 900px; margin: auto; background: #f7f7f7; }
  h1, h2 { text-align: center; }
  form { background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 5px #ccc; margin-bottom: 20px; }
  input, select, textarea, button { width: 100%; padding: 10px; margin: 5px 0; border-radius: 5px; border: 1px solid #ccc; }
  button { cursor: pointer; background: #007bff; color: #fff; border: none; }
  .lesson { background: #fff; border-radius: 10px; padding: 15px; margin-bottom: 15px; box-shadow: 0 0 5px #ccc; }
  .lesson h2 { margin: 0 0 5px 0; }
  .filter { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
  iframe { width: 100%; border: 1px solid #ccc; border-radius: 10px; margin-bottom: 10px; }
</style>
</head>
<body>

<h1>English Lessons CMS</h1>

<!-- Lesson Template -->
<h2>Lesson Template / Instructions</h2>

<!-- ℹ️ Google Doc iframe - using auto-height for adjusting UI based on the document's length) -->
<div style="position: relative; width: 100%; padding-bottom: 56.25%; /* 16:9 ratio */ overflow: hidden; border: 1px solid #ccc; border-radius: 8px;">
  <iframe 
    src="URL_OF_YOUR_LESSON_HTML" 
    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0;" 
    allowfullscreen
    loading="lazy"
  ></iframe>
</div>

<!-- Optional copy button -->
<button onclick="alert('Select and copy the content directly from the snippet above.')">
  Copy Template to Lesson Content
</button>

<!-- Filters -->
<div class="filter">
  <select id="filterLevel">
    <option value="">All Levels</option>
    <option value="A1">A1</option>
    <option value="A2">A2</option>
    <option value="B1">B1</option>
    <option value="B2">B2</option>
  </select>
  <input type="text" id="searchInput" placeholder="Search by Title or Topic" />
</div>

<!-- Add/Edit Lesson Form -->
<form id="lessonForm">
  <input type="hidden" id="lessonId" />
  <input type="text" id="title" placeholder="Lesson Title" required />
  <select id="level" required>
    <option value="">Select Level</option>
    <option value="A1">A1</option>
    <option value="A2">A2</option>
    <option value="B1">B1</option>
    <option value="B2">B2</option>
  </select>
  <input type="text" id="topic" placeholder="Lesson Topic" required />
  <textarea id="content" placeholder="Lesson Content (HTML allowed)" rows="10" required></textarea>
  <button type="submit">Save Lesson</button>
</form>

<!-- Lessons List -->
<div id="lessonsList"></div>

<script>
  const form = document.getElementById('lessonForm');
  const lessonsList = document.getElementById('lessonsList');

  // Save lesson locally (HTML renders properly now)
  form.addEventListener('submit', (e) => {
    e.preventDefault();
    const lesson = {
      title: form.title.value,
      level: form.level.value,
      topic: form.topic.value,
      content: form.content.value
    };
    addLessonToPage(lesson);
    form.reset();
  });

  function addLessonToPage(lesson) {
    const div = document.createElement('div');
    div.className = 'lesson';
    // Use innerHTML so HTML tags render instead of showing as text
    div.innerHTML = `
      <h2>${lesson.title} (${lesson.level})</h2>
      <h4>Topic: ${lesson.topic}</h4>
      <div>${lesson.content}</div>
    `;
    lessonsList.appendChild(div);
  }

  // Optional: auto-adjust iframe height
  const iframe = document.getElementById('templateIframe');
  iframe.onload = function() {
    iframe.style.height = "600px"; // Set a smaller height to reduce empty space
  };
</script>

</body>
</html>
