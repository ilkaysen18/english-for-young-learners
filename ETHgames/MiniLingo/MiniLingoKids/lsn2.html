<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Lesson 2 â€“ Is it Sunny?</title>
<meta name="theme-color" content="#4CAF50"/>
<style>
:root{--green:#4CAF50;--green-2:#81C784;--card:#fff;--shadow:0 6px 18px rgba(0,0,0,.12)}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,"Comic Sans MS","Poppins",Arial,sans-serif;background:linear-gradient(#8ECDF1,#E1F5FE);color:#2f3437}
header{background:#4CAF50;color:#fff;padding:1rem;position:sticky;top:0;text-align:center}
.container{background:var(--card);margin:16px auto;padding:18px;border-radius:14px;width:90%;max-width:520px;box-shadow:var(--shadow)}
.subtitle{color:#4b5563}
.btn{background:#4CAF50;color:#fff;border:none;border-radius:10px;padding:10px 14px;font-weight:800;cursor:pointer}
.btn:hover{filter:brightness(1.05)}
.row{display:flex;gap:10px;align-items:center;justify-content:center;flex-wrap:wrap}
.card{border:1px solid #e8eef3;border-radius:12px;padding:12px;min-width:110px;display:flex;flex-direction:column;align-items:center;gap:6px}
.hidden{display:none}
.result{min-height:1.4rem;margin-top:8px}
.progress{height:8px;background:#eaf5ff;border-radius:999px;overflow:hidden;margin:10px 0}
.progress>div{height:100%;background:linear-gradient(90deg,#4CAF50,#81C784);width:0%}
</style>
</head>
<body>
<header>Lesson 2: Is it Sunny? â˜€ï¸</header>

<div class="container" id="intro">
  <h2>Ask a question</h2>
  <p class="subtitle">Form: â€œIs it [sunny/rainy/snowy/windy]?â€</p>
  <div class="row">
    <div class="card">â˜€ï¸ <b>Is it sunny?</b></div>
    <div class="card">ğŸŒ§ï¸ <b>Is it rainy?</b></div>
    <div class="card">â„ï¸ <b>Is it snowy?</b></div>
    <div class="card">ğŸŒ¬ï¸ <b>Is it windy?</b></div>
  </div>
  <div class="row" style="justify-content:space-between;margin-top:10px">
    <a href="index.html">â¬…ï¸ Home</a>
    <button class="btn" onclick="start()">Start Practice â¡ï¸</button>
  </div>
</div>

<div class="container hidden" id="practice">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <h2 id="q">Question</h2>
    <div><span id="score">0</span>/6</div>
  </div>
  <div class="progress"><div id="bar"></div></div>
  <div class="row" id="scene" style="font-size:3rem;margin:6px 0">â˜€ï¸</div>
  <div class="row">
    <button class="btn" onclick="answer(true)">Yes</button>
    <button class="btn" onclick="answer(false)">No</button>
  </div>
  <div class="result" id="res"></div>
</div>

<script>
const LESSON_ID = 2;
const weathers = [
  {emoji:"â˜€ï¸", word:"sunny"},
  {emoji:"ğŸŒ§ï¸", word:"rainy"},
  {emoji:"â„ï¸", word:"snowy"},
  {emoji:"ğŸŒ¬ï¸", word:"windy"}
];
let rounds = [];
let idx = 0, score = 0, target = null, isTarget = false;

function start(){
  document.getElementById("intro").classList.add("hidden");
  document.getElementById("practice").classList.remove("hidden");
  // Build 6 rounds random: half true, half false
  rounds = [];
  for(let i=0;i<6;i++){
    const actual = weathers[Math.floor(Math.random()*weathers.length)];
    const ask = Math.random()<0.5 ? actual : weathers.filter(w=>w!==actual)[Math.floor(Math.random()*(weathers.length-1))];
    rounds.push({actual, ask});
  }
  idx=0;score=0;
  show();
}

function show(){
  const r = rounds[idx];
  target = r.ask.word;
  isTarget = r.actual.word===r.ask.word;
  document.getElementById("scene").textContent = r.actual.emoji;
  document.getElementById("q").textContent = `Is it ${r.ask.word}?`;
  document.getElementById("bar").style.width = `${(idx/rounds.length)*100}%`;
  document.getElementById("score").textContent = score;
  document.getElementById("res").textContent = "";
}

function answer(yes){
  const correct = (yes && isTarget) || (!yes && !isTarget);
  const res = document.getElementById("res");
  if(correct){ score++; res.textContent="âœ… Correct!"; }
  else{ res.textContent = isTarget ? "âŒ It actually is!" : "âŒ It isn't!"; }
  setTimeout(()=>{
    idx++;
    if(idx>=rounds.length){ done(); } else { show(); }
  },650);
}

function addXP(n=15){
  const s=JSON.parse(localStorage.getItem("minilingoState")||"{}");
  s.xp=(s.xp||0)+n;
  localStorage.setItem("minilingoState", JSON.stringify(s));
}
function markComplete(){
  const s=JSON.parse(localStorage.getItem("minilingoState")||"{}");
  s.progress=s.progress||{}; s.progress[LESSON_ID]=true;
  localStorage.setItem("minilingoState", JSON.stringify(s));
}
function bumpDaily(){
  const s=JSON.parse(localStorage.getItem("minilingoState")||"{}");
  const t=(new Date()).toISOString().slice(0,10);
  if(s.lastDay!==t){ s.lastDay=t; s.streak=(s.streak? (s.streak+1):1); s.daily=0; }
  s.daily=Math.min(10,(s.daily||0)+3);
  localStorage.setItem("minilingoState", JSON.stringify(s));
}
function done(){
  document.getElementById("bar").style.width="100%";
  addXP(15); bumpDaily(); markComplete();
  setTimeout(()=>window.location.href="index.html",700);
}
</script>
</body>
</html>
