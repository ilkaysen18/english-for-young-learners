<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Lesson 1 â€“ Weather</title>
<meta name="theme-color" content="#4CAF50"/>
<style>
:root{--green:#4CAF50;--green-2:#81C784;--blue:#8ECDF1;--white:#fff;--card:#fff;--shadow:0 6px 18px rgba(0,0,0,.12)}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,"Comic Sans MS","Poppins",Arial,sans-serif;background:linear-gradient(#8ECDF1,#E1F5FE);text-align:center;color:#2f3437}
header{background:#4CAF50;color:#fff;padding:1rem;position:sticky;top:0}
.container{background:var(--card);margin:16px auto;padding:18px;border-radius:14px;width:90%;max-width:520px;box-shadow:var(--shadow);text-align:left}
h2{margin:0 0 8px}
button{background:#4CAF50;color:white;border:none;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:800}
button:hover{filter:brightness(1.05)}
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
.card{display:flex;align-items:center;gap:10px;border:1px solid #e8eef3;border-radius:12px;padding:12px}
.hidden{display:none}
.result{font-size:1.1rem;margin-top:10px;height:1.4rem}
.choices{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-top:12px}
.choice-btn{font-size:1.4rem;padding:10px 0}
.progress{height:8px;background:#eaf5ff;border-radius:999px;overflow:hidden;margin-top:12px}
.progress>div{height:100%;background:linear-gradient(90deg,#4CAF50,#81C784);width:0%}
.nav{display:flex;justify-content:space-between;margin-top:10px}
</style>
</head>
<body>
<header>Lesson 1: Weather ğŸŒ¦ï¸</header>

<div class="container" id="intro">
  <h2>Weather Words</h2>
  <div class="grid">
    <div class="card">â˜€ï¸ <strong>Sunny</strong></div>
    <div class="card">ğŸŒ§ï¸ <strong>Rainy</strong></div>
    <div class="card">â„ï¸ <strong>Snowy</strong></div>
    <div class="card">ğŸŒ¬ï¸ <strong>Windy</strong></div>
  </div>
  <div class="nav">
    <a href="index.html">â¬…ï¸ Home</a>
    <button onclick="startPractice()">Start Practice â¡ï¸</button>
  </div>
</div>

<div class="container hidden" id="practice">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <h2 id="q">Question</h2>
    <div style="min-width:80px;text-align:right"><span id="score">0</span>/4</div>
  </div>
  <div class="progress"><div id="bar"></div></div>
  <div class="choices" id="choices"></div>
  <div class="result" id="res"></div>
</div>

<script>
const LESSON_ID = 1;
const vocab = [
  {emoji:"â˜€ï¸", name:"Sunny"},
  {emoji:"ğŸŒ§ï¸", name:"Rainy"},
  {emoji:"â„ï¸", name:"Snowy"},
  {emoji:"ğŸŒ¬ï¸", name:"Windy"}
];
let index = 0, corrects = 0;

function startPractice(){
  document.getElementById("intro").classList.add("hidden");
  document.getElementById("practice").classList.remove("hidden");
  index = 0; corrects = 0;
  ask();
}

function ask(){
  const v = vocab[index];
  document.getElementById("q").textContent = `Which picture is ${v.name}?`;
  document.getElementById("score").textContent = corrects;
  document.getElementById("bar").style.width = `${(index)/vocab.length*100}%`;
  const c = document.getElementById("choices");
  c.innerHTML = "";
  // shuffle options
  const opts = [...vocab].sort(()=>Math.random()-0.5);
  opts.forEach(opt=>{
    const b=document.createElement("button");
    b.className="choice-btn";
    b.textContent=opt.emoji;
    b.onclick=()=>check(opt.emoji===v.emoji);
    c.appendChild(b);
  });
  document.getElementById("res").textContent = "";
}

function check(isCorrect){
  const res=document.getElementById("res");
  if(isCorrect){
    corrects++;
    res.textContent="âœ… Great!";
    setTimeout(()=>{
      index++;
      if(index>=vocab.length){ done(); }
      else{ ask(); }
    },600);
  }else{
    res.textContent="âŒ Try again!";
  }
}

function addXP(n=10){
  const s=JSON.parse(localStorage.getItem("minilingoState")||"{}");
  s.xp=(s.xp||0)+n;
  localStorage.setItem("minilingoState", JSON.stringify(s));
}
function markComplete(){
  const s=JSON.parse(localStorage.getItem("minilingoState")||"{}");
  s.progress=s.progress||{}; s.progress[LESSON_ID]=true;
  localStorage.setItem("minilingoState", JSON.stringify(s));
}
function bumpDaily(){
  const s=JSON.parse(localStorage.getItem("minilingoState")||"{}");
  const t=(new Date()).toISOString().slice(0,10);
  if(s.lastDay!==t){ s.lastDay=t; s.streak=(s.streak? (s.streak+1):1); s.daily=0; }
  s.daily=Math.min(10,(s.daily||0)+3);
  localStorage.setItem("minilingoState", JSON.stringify(s));
}

function done(){
  document.getElementById("bar").style.width = "100%";
  addXP(10);
  bumpDaily();
  markComplete();
  setTimeout(()=>{ window.location.href="index.html"; },600);
}
</script>
</body>
</html>
