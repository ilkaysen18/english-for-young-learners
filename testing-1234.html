<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>English Training Hub - Platform</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&display=swap');
  body{
    margin:0;
    font-family:'Comic Neue',sans-serif;
    background:linear-gradient(to bottom,#a7dfff,#f6faff);
    min-height:100vh;
    overflow-x:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .container{width:100%;max-width:900px;min-height:90vh;perspective:1500px;position:relative;padding:20px;box-sizing:border-box;}
  .page{
    position:absolute;width:100%;height:100%;background:white;border-radius:20px;
    box-shadow:0 5px 15px rgba(0,0,0,0.2);display:flex;flex-direction:column;
    align-items:center;transition:transform 0.8s ease,opacity 0.8s ease;
    backface-visibility:hidden;overflow-y:auto;padding:20px;box-sizing:border-box;
  }
  .visible{opacity:1;transform:translateX(0);pointer-events:auto;}
  .hidden{opacity:0;pointer-events:none;transform:translateX(100%);position:absolute;}
  h1{font-size:2em;margin-top:10px;}
  h2{font-size:1.5em;margin:10px 0;}
  h3{font-size:1.2em;margin:5px 0;}
  p{font-size:1em;text-align:center;margin:10px 0;}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin:20px 0;width:100%;max-width:800px;}
  .course-card{
    position:relative;
    background:#fdf6e3;
    border-radius:15px;
    padding:20px;
    box-shadow:0 2px 5px rgba(0,0,0,0.1);
    text-align:center;
    min-height:120px;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    transition:transform 0.2s;
  }
  .course-card:hover{transform:translateY(-5px);box-shadow:0 5px 15px rgba(0,0,0,0.2);}
  .course-title{font-size:1.2em;margin-bottom:10px;}
  .cms-btn{
    position:absolute;
    bottom:10px;
    right:10px;
    background:#5D5CDE;
    color:white;
    border:none;
    border-radius:50%;
    width:40px;
    height:40px;
    font-size:0.8em;
    font-weight:bold;
    cursor:pointer;
    box-shadow:0 3px 0 #4a49b8;
    z-index:10;
    transition:all 0.2s;
  }
  .cms-btn:hover{background:#7776ee;transform:scale(1.1);}
  .nav{margin-top:20px;margin-bottom:20px;display:flex;flex-wrap:wrap;justify-content:center;}
  button.nav-btn{margin:10px;padding:10px 20px;background:#ffd34e;border:none;border-radius:10px;font-size:1em;cursor:pointer;box-shadow:0 3px 0 #e0a800;font-family:'Comic Neue',sans-serif;}
  button.nav-btn:hover{background:#ffe678;}

  /* Modal Styles */
  .modal{
    display:none;
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.5);
    z-index:1000;
    justify-content:center;
    align-items:center;
  }
  .modal.show{display:flex;}
  .modal-content{
    background:white;
    border-radius:20px;
    padding:30px;
    max-width:600px;
    width:90%;
    max-height:80vh;
    overflow-y:auto;
    box-shadow:0 10px 30px rgba(0,0,0,0.3);
  }
  .modal-header{
    font-size:1.5em;
    margin-bottom:20px;
    color:#5D5CDE;
  }
  .form-group{
    margin-bottom:20px;
  }
  .form-group label{
    display:block;
    margin-bottom:8px;
    font-weight:bold;
  }
  .form-group input[type="text"]{
    width:100%;
    padding:12px;
    border:2px solid #ddd;
    border-radius:10px;
    font-size:16px;
    font-family:'Comic Neue',sans-serif;
    box-sizing:border-box;
  }
  .form-group textarea{
    width:100%;
    padding:12px;
    border:2px solid #ddd;
    border-radius:10px;
    font-size:16px;
    font-family:monospace;
    min-height:200px;
    box-sizing:border-box;
  }
  .form-actions{
    display:flex;
    gap:10px;
    justify-content:flex-end;
  }
  .btn-primary{
    padding:12px 24px;
    background:#5D5CDE;
    color:white;
    border:none;
    border-radius:10px;
    font-size:1em;
    cursor:pointer;
    font-family:'Comic Neue',sans-serif;
  }
  .btn-primary:hover{background:#7776ee;}
  .btn-secondary{
    padding:12px 24px;
    background:#ddd;
    color:#333;
    border:none;
    border-radius:10px;
    font-size:1em;
    cursor:pointer;
    font-family:'Comic Neue',sans-serif;
  }
  .btn-secondary:hover{background:#ccc;}

  /* Lesson Styles */
  .lesson-item{
    background:#fdf6e3;
    border-radius:15px;
    padding:20px;
    margin:10px 0;
    box-shadow:0 2px 5px rgba(0,0,0,0.1);
    width:100%;
    max-width:800px;
  }
  .lesson-title{
    font-size:1.5em;
    margin-bottom:15px;
    color:#5D5CDE;
  }
  .lesson-content{
    font-size:1em;
    line-height:1.6;
  }
  .vocab{
    font-size:2rem;
    background:#fdf6e3;
    border-radius:15px;
    padding:10px;
    box-shadow:0 2px 5px rgba(0,0,0,0.1);
    text-align:center;
    min-height:60px;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .lessons-container{
    width:100%;
    max-width:800px;
    margin-top:20px;
  }

  /* Dark mode support */
  @media (prefers-color-scheme: dark) {
    body{
      background:linear-gradient(to bottom,#1a1a1a,#2d2d2d);
    }
    .page, .modal-content{
      background:#181818;
      color:#e0e0e0;
    }
    .course-card, .lesson-item, .vocab{
      background:#2d2d2d;
      color:#e0e0e0;
    }
    .form-group input[type="text"],
    .form-group textarea{
      background:#2d2d2d;
      color:#e0e0e0;
      border-color:#444;
    }
  }
</style>
</head>
<body>
<div class="container">

  <!-- Course Selection Page -->
  <div class="page visible" id="coursePage">
    <h3>üåèüí° English Training Hub</h3>
    <h2>Our Courses üöÄ</h2>
    <div class="grid">
      <div class="course-card" onclick="viewCourse('kids-english')">
        <div class="course-title">KIDS ENGLISH üçè</div>
        <button class="cms-btn" onclick="event.stopPropagation(); openCMS('kids-english')">CMS</button>
      </div>

      <div class="course-card" onclick="viewCourse('general-english')">
        <div class="course-title">GENERAL ENGLISH ü¶ò</div>
        <button class="cms-btn" onclick="event.stopPropagation(); openCMS('general-english')">CMS</button>
      </div>

      <div class="course-card" onclick="viewCourse('speaking-pictures')">
        <div class="course-title">SPEAKING WITH PICTURES üñº</div>
        <button class="cms-btn" onclick="event.stopPropagation(); openCMS('speaking-pictures')">CMS</button>
      </div>
    </div>
  </div>

  <!-- Course View Page -->
  <div class="page hidden" id="courseViewPage">
    <h2 id="courseViewTitle"></h2>
    <div class="lessons-container" id="lessonsContainer"></div>
    <div class="nav">
      <button class="nav-btn" onclick="backToCourses()">‚Üê Back to Courses</button>
    </div>
  </div>

</div>

<!-- CMS Modal -->
<div class="modal" id="cmsModal">
  <div class="modal-content">
    <div class="modal-header">Add New Lesson</div>
    <form id="lessonForm" onsubmit="saveLesson(event)">
      <div class="form-group">
        <label for="lessonTitle">Lesson Title:</label>
        <input type="text" id="lessonTitle" required placeholder="Enter lesson title">
      </div>
      <div class="form-group">
        <label for="lessonHTML">Lesson HTML Content:</label>
        <textarea id="lessonHTML" required placeholder="Paste your HTML content here..."></textarea>
      </div>
      <div class="form-actions">
        <button type="button" class="btn-secondary" onclick="closeCMS()">Cancel</button>
        <button type="submit" class="btn-primary">Save Lesson</button>
      </div>
    </form>
  </div>
</div>

<script>
// Dark mode support
if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    document.documentElement.classList.add('dark');
}
window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
    if (event.matches) {
        document.documentElement.classList.add('dark');
    } else {
        document.documentElement.classList.remove('dark');
    }
});

let currentCourse = '';

// In-memory storage (since localStorage is not supported in iframe)
let coursesData = {
  'kids-english': [],
  'general-english': [],
  'speaking-pictures': []
};

// Initialize storage
function initStorage() {
  // Data is already initialized in memory
  return coursesData;
}

// Open CMS modal
function openCMS(courseId) {
  currentCourse = courseId;
  document.getElementById('cmsModal').classList.add('show');
  document.getElementById('lessonForm').reset();
}

// Close CMS modal
function closeCMS() {
  document.getElementById('cmsModal').classList.remove('show');
  currentCourse = '';
}

// Save lesson
function saveLesson(event) {
  event.preventDefault();

  const title = document.getElementById('lessonTitle').value;
  const html = document.getElementById('lessonHTML').value;

  initStorage();

  if (!coursesData[currentCourse]) {
    coursesData[currentCourse] = [];
  }

  coursesData[currentCourse].push({
    id: Date.now(),
    title: title,
    html: html,
    created: new Date().toISOString()
  });

  closeCMS();

  // If currently viewing this course, refresh the view
  if (document.getElementById('courseViewPage').classList.contains('visible')) {
    viewCourse(currentCourse);
  }

  showNotification('Lesson added successfully! ‚úÖ');
}

// View course
function viewCourse(courseId) {
  currentCourse = courseId;

  const titles = {
    'kids-english': 'KIDS ENGLISH üçè',
    'general-english': 'GENERAL ENGLISH ü¶ò',
    'speaking-pictures': 'SPEAKING WITH PICTURES üñº'
  };

  document.getElementById('courseViewTitle').textContent = titles[courseId];

  initStorage();
  const lessons = coursesData[courseId] || [];

  const container = document.getElementById('lessonsContainer');
  container.innerHTML = '';

  if (lessons.length === 0) {
    container.innerHTML = '<p>No lessons yet. Click the CMS button to add your first lesson! üìù</p>';
  } else {
    lessons.forEach(lesson => {
      const lessonDiv = document.createElement('div');
      lessonDiv.className = 'lesson-item';
      lessonDiv.innerHTML = `
        <div class="lesson-title">${lesson.title}</div>
        <div class="lesson-content">${lesson.html}</div>
      `;
      container.appendChild(lessonDiv);
    });
  }

  // Switch pages
  document.getElementById('coursePage').classList.remove('visible');
  document.getElementById('coursePage').classList.add('hidden');
  document.getElementById('courseViewPage').classList.remove('hidden');
  document.getElementById('courseViewPage').classList.add('visible');
}

// Back to courses
function backToCourses() {
  document.getElementById('courseViewPage').classList.remove('visible');
  document.getElementById('courseViewPage').classList.add('hidden');
  document.getElementById('coursePage').classList.remove('hidden');
  document.getElementById('coursePage').classList.add('visible');
}

// Show notification
function showNotification(message) {
  const notification = document.createElement('div');
  notification.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    background: #5D5CDE;
    color: white;
    padding: 15px 25px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    z-index: 2000;
    font-family: 'Comic Neue', sans-serif;
    animation: slideIn 0.3s ease;
  `;
  notification.textContent = message;
  document.body.appendChild(notification);

  setTimeout(() => {
    notification.style.animation = 'slideOut 0.3s ease';
    setTimeout(() => notification.remove(), 300);
  }, 3000);
}

// Close modal when clicking outside
document.getElementById('cmsModal').addEventListener('click', function(e) {
  if (e.target === this) {
    closeCMS();
  }
});

// Initialize
initStorage();
</script>

<style>
@keyframes slideIn {
  from { transform: translateX(400px); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}
@keyframes slideOut {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(400px); opacity: 0; }
}
</style>

</body>
</html>
